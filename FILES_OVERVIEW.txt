ğŸ“¦ VPP 25.06 COMPATIBILITY PATCH - FILES OVERVIEW
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

This file provides a quick reference to all files created/modified for the
VPP 25.06 compatibility patch.

ğŸ“‚ FILE LISTING
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

MODIFIED FILES (Apply Changes)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ğŸ“ snmp_agent_integrated.py
   Location: /home/najib/vpp-snmp-agent-v2/snmp_agent_integrated.py
   Change:   Added _safe_get_stat() method + updated _collect_data()
   Status:   âœ… READY FOR PRODUCTION
   
   What changed:
   - Added method: _safe_get_stat() (line ~204)
   - Modified method: _collect_data() (line ~238)
   - All 13 interface stats now use safe access
   - Backward compatible with older VPP versions
   
   How to use:
   $ python3 snmp_agent_integrated.py -p 5 -d


SUPPORT FILES (Tools & Documentation)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ğŸ”§ vpp_25_06_patch.py (Compatibility Validator)
   Purpose:  Standalone utility to validate VPP 25.06 compatibility
   Type:     Validator + Helper class
   Status:   âœ… READY
   
   Contains:
   - VPP2506Patch class with helper methods
   - validate_stats() - verify all required paths exist
   - safe_get_stat() - safe access to stats
   - get_interface_stats() - collect all stats for an interface
   
   How to use:
   $ python3 vpp_25_06_patch.py      # Validate
   
   Or import:
   $ python3 -c "from vpp_25_06_patch import VPP2506Patch; ..."


ğŸ” debug_stats.py (Diagnostic Tool)
   Purpose:  Debug tool to see all available stats in VPP
   Type:     Diagnostic utility
   Status:   âœ… READY
   
   Shows:
   - All interface names found
   - All /if/* stats paths available
   - Test each stats path for accessibility
   - List all 4503 stats paths in VPP
   
   How to use:
   $ python3 debug_stats.py


ğŸš€ apply_patch.py (Patch Applicator)
   Purpose:  Apply patch to original vpp-snmp-agent.py
   Type:     Patcher utility
   Status:   âœ… READY
   
   What it does:
   - Creates backup of original file
   - Adds _safe_get_stat() method
   - Patches hardcoded stats accesses
   - Maintains compatibility
   
   How to use:
   $ python3 apply_patch.py vpp-snmp-agent.py


ğŸ“– DOCUMENTATION FILES
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ğŸ“„ PATCH_SUMMARY.md (This Overview)
   Complete summary of patch, files, and usage
   Best for: Executive summary, quick reference
   
   Sections:
   - Problem statement
   - Solution overview
   - Deliverables
   - Quick start (3 steps)
   - Technical details
   - Stats paths status
   - Success verification
   - Troubleshooting


ğŸ“„ VPP_25_06_PATCH.md (Detailed Technical Docs)
   Comprehensive technical documentation
   Best for: In-depth understanding, troubleshooting
   
   Sections:
   - Overview & history
   - What changed (before/after)
   - VPP 25.06 stats path status
   - Installation options
   - Testing procedures
   - Debugging guide
   - Compatibility matrix
   - Performance impact
   - Version info


ğŸ“„ QUICK_START.py (Interactive Guide)
   Visual quick start with ASCII art
   Best for: Getting started quickly
   
   Shows:
   - 3-step quick start
   - Success criteria
   - Fallback options
   - Validation checklist
   - Troubleshooting flowchart
   
   How to use:
   $ python3 QUICK_START.py


ğŸ¯ RECOMMENDED USAGE FLOW
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

FOR MOST USERS (Recommended):
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Understand the patch:
   $ python3 QUICK_START.py      # Read the visual guide

2. Verify compatibility:
   $ python3 vpp_25_06_patch.py  # Validate all stats paths

3. Run the agent (already patched):
   $ python3 snmp_agent_integrated.py -p 5 -d

4. Test SNMP:
   $ snmpget -v2c -c QET2juoNx1Fu localhost 1.3.6.1.2.1.2.2.1.2.1000


FOR ADVANCED USERS (Debugging):
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. See all available stats:
   $ python3 debug_stats.py

2. Run agent with verbose logging:
   $ python3 snmp_agent_integrated.py -p 5 -dd

3. Check specific interface stats:
   $ python3 << 'EOF'
   from vpp_25_06_patch import VPP2506Patch
   from vppstats import VPPStats
   
   stats = VPPStats()
   stats.connect()
   iface_names = list(stats["/if/names"])
   for i, ifname in enumerate(iface_names[:3]):
       print(f"{ifname}: {VPP2506Patch.get_interface_stats(stats, ifname, i)}")
   stats.disconnect()
   EOF


FOR ORIGINAL FILE PRESERVATION:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

If you want to keep the original vpp-snmp-agent.py:

1. Apply patch:
   $ python3 apply_patch.py vpp-snmp-agent.py

2. Run patched original:
   $ python3 vpp-snmp-agent.py -p 5 -d

3. Original unchanged - see vpp-snmp-agent.py.backup


ğŸ“Š QUICK REFERENCE TABLE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

File                      Type        Purpose
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
snmp_agent_integrated.py  AGENT       ğŸŒŸ RECOMMENDED: Already patched, use this
vpp_25_06_patch.py        TOOL        Validator + helper class for safe stats
debug_stats.py            TOOL        See all available stats paths in VPP
apply_patch.py            TOOL        Patch original vpp-snmp-agent.py
PATCH_SUMMARY.md          DOC         Complete patch overview (you are here)
VPP_25_06_PATCH.md        DOC         Detailed technical documentation
QUICK_START.py            DOC         Interactive visual quick start guide


ğŸ¯ NEXT STEPS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Choose your path:

Path 1: Quick Start (5 minutes)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. $ python3 vpp_25_06_patch.py    # Validate (2 min)
2. $ python3 snmp_agent_integrated.py -p 5 -d  # Run (3 min)
3. Test in LibreNMS

Path 2: Full Understanding (15 minutes)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. $ python3 QUICK_START.py        # Read guide
2. $ python3 debug_stats.py        # See stats
3. $ python3 vpp_25_06_patch.py    # Validate
4. $ python3 snmp_agent_integrated.py -p 5  # Run

Path 3: Advanced Debug (20+ minutes)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. Read: VPP_25_06_PATCH.md
2. Run: debug_stats.py with inspection
3. Run: agent with -dd flag
4. Analyze logs and apply_patch if needed


âœ… SUCCESS CRITERIA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

You know the patch worked when:

âœ… Agent starts without KeyError or exception
âœ… Agent detects all 11 interfaces (local0, HundredGigabit*, Bond*, tap*)
âœ… SNMP queries return interface names (e.g., "local0")
âœ… SNMP queries return traffic statistics
âœ… No "stats path not found" in logs
âœ… Interfaces appear in LibreNMS with traffic graphs


ğŸ†˜ TROUBLESHOOTING
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Issue: "KeyError: '/if/...''"
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â†’ Patch not applied correctly
â†’ Verify: grep "_safe_get_stat" snmp_agent_integrated.py
â†’ Solution: Check file was modified (line ~204)


Issue: Agent won't start
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â†’ Run with debug: python3 snmp_agent_integrated.py -d 2>&1 | head -50
â†’ Check logs for actual error
â†’ Verify VPP is running: vppctl show version


Issue: Interfaces show 0 for all stats
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â†’ Check interfaces exist: vppctl show interfaces
â†’ Check stats available: python3 debug_stats.py
â†’ Verify interface has traffic


Issue: SNMP query times out
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â†’ Check snmpd running: systemctl status snmpd
â†’ Check config: grep agentX /etc/snmp/snmpd.conf
â†’ Verify firewall: sudo ufw status
â†’ Test agent: python3 snmp_agent_integrated.py -d


ğŸ“ SUPPORT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

For help:
1. Check QUICK_START.py (visual guide)
2. Check VPP_25_06_PATCH.md (detailed docs)
3. Run debug_stats.py (see available stats)
4. Run agent with -dd flag (verbose logging)

Files location: /home/najib/vpp-snmp-agent-v2/


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Patch Status:    âœ… READY FOR PRODUCTION
Last Updated:    2025-12-09
VPP Tested:      25.06-rc2~0-g8070c8800~b8
Python Version:  3.7+
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
